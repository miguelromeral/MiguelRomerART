@using MRA.Web.Models.Images
@model MRA.Web.Models.Home.IndexViewModel


@{
    ViewData["Title"] = "Colecciones";
}

@section Styles {
    <link href="~/css/images.css" rel="stylesheet" />
    <link href="~/css/image-thumbnail.css" rel="stylesheet" />
    <link href="~/css/collections.css" rel="stylesheet" />
}

<div class="row mb-2">
    <div class="col-sm-12">
        <h1>Colecciones</h1>
        <p>
            Aquí puedes ver una selección de diferentes imágenes en función de diferentes temas. Pulsa en cualquiera de ellas para ver más detalles.
        </p>
        <p>
            También puedes <a href="@Url.Action("Index", "Art")">Ver la Gelería Completa</a>.
        </p>
    </div>
</div>
<div class="row">

    @foreach (var col in Model.Collections)
    {
        var numDrawings = col.Drawings.Count;
        var nameCarousel = "carousel" + col.Id;

        <div class="col-sm-12 col-md-12 col-lg-6 mb-2 p-2 mr-collection-section">

            <div id="@(nameCarousel)" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">

                    @for (int i = 0; i < numDrawings; i++)
                    {
                        <div type="button" data-bs-target="#@(nameCarousel)" data-bs-slide-to="@(i)" class="mr-carousel-indicator @(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")" aria-label="Slide @(i)">
                        </div>
                    }
                </div>
                <div class="carousel-inner">
                    @for (int i = 0; i < numDrawings; i++)
                    {
                        <div class="carousel-item @(i == 0 ? "active" : "")">
                            <div class="mr-carousel-item-image">

                                @{
                                    await Html.RenderPartialAsync("Images/_ImageThumbnail", new ImageThumbnailModel(col.Drawings[i]));
                                }

                            </div>

                            @* <img src="@col.Drawings[i].UrlThumbnail" class="d-block w-100" alt="..."> *@
                        </div>
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#@(nameCarousel)" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#@(nameCarousel)" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <h3 class="mr-collection-title">@col.Name</h3>
            <div class="mr-collection-description">
                @Html.Raw(col.Description)
            </div>

        </div>
    }
</div>
